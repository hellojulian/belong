import{v as E}from"./v4-D8aEg3BZ.js";const{addons:R}=__STORYBOOK_MODULE_PREVIEW_API__,{global:d}=__STORYBOOK_MODULE_GLOBAL__,{ImplicitActionsDuringRendering:h}=__STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS__;var A="storybook/actions",b=`${A}/action-event`,w={depth:10,clearOnStoryChange:!0,limit:50},O=(t,e)=>{let i=Object.getPrototypeOf(t);return!i||e(i)?i:O(i,e)},T=t=>!!(typeof t=="object"&&t&&O(t,e=>/^Synthetic(?:Base)?Event$/.test(e.constructor.name))&&typeof t.persist=="function"),I=t=>{if(T(t)){let e=Object.create(t.constructor.prototype,Object.getOwnPropertyDescriptors(t));e.persist();let i=Object.getOwnPropertyDescriptor(e,"view"),n=i?.value;return typeof n=="object"&&n?.constructor.name==="Window"&&Object.defineProperty(e,"view",{...i,value:Object.create(n.constructor.prototype)}),e}return t},S=()=>typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?E():Date.now().toString(36)+Math.random().toString(36).substring(2);function l(t,e={}){let i={...w,...e},n=function(...r){if(e.implicit){let g=("__STORYBOOK_PREVIEW__"in d?d.__STORYBOOK_PREVIEW__:void 0)?.storyRenders.find(a=>a.phase==="playing"||a.phase==="rendering");if(g){let a=!window?.FEATURES?.disallowImplicitActionsInRenderV8,_=new h({phase:g.phase,name:t,deprecated:a});if(a)console.warn(_);else throw _}}let o=R.getChannel(),c=S(),s=5,p=r.map(I),m=r.length>1?p:p[0],u={id:c,count:0,data:{name:t,args:m},options:{...i,maxDepth:s+(i.depth||3),allowFunction:i.allowFunction||!1}};o.emit(b,u)};return n.isAction=!0,n.implicit=e.implicit,n}var f=(t,e)=>typeof e[t]>"u"&&!(t in e),v=t=>{let{initialArgs:e,argTypes:i,id:n,parameters:{actions:r}}=t;if(!r||r.disable||!r.argTypesRegex||!i)return{};let o=new RegExp(r.argTypesRegex);return Object.entries(i).filter(([c])=>!!o.test(c)).reduce((c,[s,p])=>(f(s,e)&&(c[s]=l(s,{implicit:!0,id:n})),c),{})},D=t=>{let{initialArgs:e,argTypes:i,parameters:{actions:n}}=t;return n?.disable||!i?{}:Object.entries(i).filter(([r,o])=>!!o.action).reduce((r,[o,c])=>(f(o,e)&&(r[o]=l(typeof c.action=="string"?c.action:o)),r),{})},F=[D,v],y=Symbol.for("tinyspy:spy"),j=t=>{let{args:e,parameters:{actions:i}}=t;i?.disable||Object.entries(e).filter(([,n])=>typeof n=="function"&&"_isMockFunction"in n&&n._isMockFunction).forEach(([n,r])=>{let o=r.getMockImplementation()??(y in r?r[y]?.getOriginal():void 0);if(o?._actionAttached!==!0&&o?.isAction!==!0){let c=(...s)=>(l(n)(...s),o?.(...s));c._actionAttached=!0,r.mockImplementation(c)}})},M=[j];export{F as argsEnhancers,M as loaders,y as tinySpyInternalState};
